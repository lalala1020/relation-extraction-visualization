<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>数智人文研究与应用平台</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- <link rel="stylesheet" href="font/iconsmind-s/css/iconsminds.css" />
    <link rel="stylesheet" href="font/simple-line-icons/css/simple-line-icons.css" />

    <link rel="stylesheet" href="css/vendor/bootstrap.min.css" />
    <link rel="stylesheet" href="css/vendor/bootstrap.rtl.only.min.css" />
    <link rel="stylesheet" href="css/vendor/component-custom-switch.min.css" />
    <link rel="stylesheet" href="css/vendor/perfect-scrollbar.css" />
    <link rel="stylesheet" href="css/main.css" /> -->

    <link rel="stylesheet" href="font/iconsmind-s/css/iconsminds.css" />
    <link rel="stylesheet" href="font/simple-line-icons/css/simple-line-icons.css" />

    <link rel="stylesheet" href="css/vendor/bootstrap.min.css" />
    <link rel="stylesheet" href="css/vendor/bootstrap.rtl.only.min.css" />
    <link rel="stylesheet" href="css/vendor/perfect-scrollbar.css" />
    <link rel="stylesheet" href="css/vendor/bootstrap-stars.css" />
    <link rel="stylesheet" href="css/vendor/component-custom-switch.min.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link rel="stylesheet" href="css/g6/g6.style.css">
</head>

<body id="app-container" class="menu-sub-hidden show-spinner">
<!--顶部导航栏-->
<nav class="navbar fixed-top">
    <!--顶部导航栏左三分之一-->
    <div class="d-flex align-items-center navbar-left">
        <!--左上角展开按钮-->
        <a href="#" class="menu-button d-none d-md-block">
            <svg class="main" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 9 17">
                <rect x="0.48" y="0.5" width="7" height="1" />
                <rect x="0.48" y="7.5" width="7" height="1" />
                <rect x="0.48" y="15.5" width="7" height="1" />
            </svg>
            <svg class="sub" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 17">
                <rect x="1.56" y="0.5" width="16" height="1" />
                <rect x="1.56" y="7.5" width="16" height="1" />
                <rect x="1.56" y="15.5" width="16" height="1" />
            </svg>
        </a>

        <a href="#" class="menu-button-mobile d-xs-block d-sm-block d-md-none">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 26 17">
                <rect x="0.5" y="0.5" width="25" height="1" />
                <rect x="0.5" y="7.5" width="25" height="1" />
                <rect x="0.5" y="15.5" width="25" height="1" />
            </svg>
        </a>
        
        <!--顶部搜索框-->
        <div class="search" data-search-path="Pages.Search.html?q=">
            <input placeholder="搜索...">
            <!--搜索按钮-->
            <span class="search-icon">
                <i class="simple-icon-magnifier"></i>
            </span>
        </div>
    
        <!--未定义功能按钮-->
        <a class="btn btn-sm btn-outline-primary ml-3 d-none d-md-inline-block"
            href="https://1.envato.market/5kAb">&nbsp;自定义&nbsp;</a>
    </div>


    <!--主logo图片，点击可跳转主页面-->
    <!--  <a class="navbar-logo" href="index.html"> -->

    <h3 class='text-center btn-link'>数智人文研究与应用平台</h3>
        
    <!-- </a> -->
    
    <!--顶部导航栏你右半部分-->
    <div class="navbar-right">
        <div class="header-icons d-inline-block align-middle">
            <!--白天夜晚模式切换按钮-->
            <div class="d-none d-md-inline-block align-text-bottom mr-3">
                <div class="custom-switch custom-switch-primary-inverse custom-switch-small pl-1"
                data-toggle="tooltip" data-placement="left" title="日夜模式切换">
                    <input class="custom-switch-input" id="switchDark" type="checkbox" checked>
                    <label class="custom-switch-btn" for="switchDark"></label>
                </div>
            </div>
            
            <!--未定义分类功能按钮-->
            <div class="position-relative d-none d-sm-inline-block">
                <button class="header-icon btn btn-empty" type="button" id="iconMenuButton" data-toggle="dropdown"
                    aria-haspopup="true" aria-expanded="false">
                    <i class="simple-icon-grid"></i>
                </button>
                <!--下拉分功能框-->
                <div class="dropdown-menu dropdown-menu-right mt-3  position-absolute" id="iconMenuDropdown">
                    <a href="#" class="icon-menu-item">
                        <i class="iconsminds-equalizer d-block"></i>
                        <span>Settings</span>
                    </a>

                    <a href="#" class="icon-menu-item">
                        <i class="iconsminds-male-female d-block"></i>
                        <span>Users</span>
                    </a>

                    <a href="#" class="icon-menu-item">
                        <i class="iconsminds-puzzle d-block"></i>
                        <span>Components</span>
                    </a>

                    <a href="#" class="icon-menu-item">
                        <i class="iconsminds-bar-chart-4 d-block"></i>
                        <span>Profits</span>
                    </a>

                    <a href="#" class="icon-menu-item">
                        <i class="iconsminds-file d-block"></i>
                        <span>Surveys</span>
                    </a>

                    <a href="#" class="icon-menu-item">
                        <i class="iconsminds-suitcase d-block"></i>
                        <span>Tasks</span>
                    </a>

                </div>
            </div>
            
            <!--右上角消息提示按钮-->
            <div class="position-relative d-inline-block">
                <button class="header-icon btn btn-empty" type="button" id="notificationButton"
                    data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <i class="simple-icon-bell"></i>
                    <span class="count">3</span>
                </button>
                <div class="dropdown-menu dropdown-menu-right mt-3 position-absolute" id="notificationDropdown">
                    <div class="scroll">
                        <div class="d-flex flex-row mb-3 pb-3 border-bottom">
                            <a href="#">
                                <img src="img/profiles/l-2.jpg" alt="Notification Image"
                                    class="img-thumbnail list-thumbnail xsmall border-0 rounded-circle" />
                            </a>
                            <div class="pl-3">
                                <a href="#">
                                    <p class="font-weight-medium mb-1">岳老师发送了一条新消息!</p>
                                    <p class="text-muted mb-0 text-small">02.04.2022 - 12:45</p>
                                </a>
                            </div>
                        </div>
                        <div class="d-flex flex-row mb-3 pb-3 border-bottom">
                            <a href="#">
                                <img src="img/notifications/1.jpg" alt="Notification Image"
                                    class="img-thumbnail list-thumbnail xsmall border-0 rounded-circle" />
                            </a>
                            <div class="pl-3">
                                <a href="#">
                                    <p class="font-weight-medium mb-1">我删除了一条三元组数据!</p>
                                    <p class="text-muted mb-0 text-small">02.12.2022 - 02:45</p>
                                </a>
                            </div>
                        </div>
                        <div class="d-flex flex-row mb-3 pb-3 border-bottom">
                            <a href="#">
                                <img src="img/notifications/2.jpg" alt="Notification Image"
                                    class="img-thumbnail list-thumbnail xsmall border-0 rounded-circle" />
                            </a>
                            <div class="pl-3">
                                <a href="#">
                                    <p class="font-weight-medium mb-1">曹同学寻找到了一种新的分析方法.</p>
                                    <p class="text-muted mb-0 text-small">01.24.2022 - 06:50</p>
                                </a>
                            </div>
                        </div>
                        <div class="d-flex flex-row mb-3 pb-3 ">
                            <a href="#">
                                <img src="img/notifications/3.jpg" alt="Notification Image"
                                    class="img-thumbnail list-thumbnail xsmall border-0 rounded-circle" />
                            </a>
                            <div class="pl-3">
                                <a href="#">
                                    <p class="font-weight-medium mb-1">3 items just added to wish list by a user!
                                    </p>
                                    <p class="text-muted mb-0 text-small">09.04.2018 - 12:45</p>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!--全屏功能-->
            <button class="header-icon btn btn-empty d-none d-sm-inline-block" type="button" id="fullScreenButton">
                <div class="custom-switch custom-switch-primary-inverse custom-switch-small pl-1"
                data-toggle="tooltip" data-placement="left" title="应用全屏">
                <i class="simple-icon-size-fullscreen"></i>
                <i class="simple-icon-size-actual"></i>
            </button>

        </div>

        <div class="user d-inline-block">
            <!--用户ID与用户照片-->
            <button class="btn btn-empty p-0" type="button" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
                <span class="name">高方正</span>
                <span>
                    <img alt="Profile Picture" src="img/profiles/Jonathan.jpeg" />
                </span>
            </button>
            
            <!--个人头像下拉列表-->
            <div class="dropdown-menu dropdown-menu-right mt-3">
                <a class="dropdown-item" href="#">我的账号</a>
                <a class="dropdown-item" href="#">个人资料</a>
                <a class="dropdown-item" href="#">操作历史</a>
                <a class="dropdown-item" href="#">登出</a>
            </div>
        </div>
    </div>
</nav>

<!--左侧功能目录-->
<div class="menu">
    <!--最左侧一级目录-->
    <div class="main-menu">
        <div class="scroll">
            <ul class="list-unstyled">
                <!--功能模块一-->
                <li class="active">
                    <a href="#dashboard">
                        <i class="iconsminds-digital-drawing"></i>
                        <span>知识图谱</span>
                        <span>上传/展示</span>
                    </a>
                </li>
                <!--功能模块二-->
                <li>
                    <a href="#ui">
                        <i class="iconsminds-hamburger"></i> 
                        <span>文本分词</span>
                        <span>词频统计</span>
                    </a>
                </li>
                <!--功能模块三-->
                <li>
                    <a href="#applications">
                        <i class="iconsminds-arrow-refresh"></i>
                        <span>知识图谱</span>
                        <span>实体识别</span>
                    </a>
                </li>
                <!--功能模块四-->
                <li>
                    <a href="#menu">
                        <i class="iconsminds-arrow-outside-gap"></i>
                        <span>知识图谱</span>
                        <span>关系抽取</span>
                    </a>
                </li>
                <!--功能模块五-->
                
                <!--功能模块六-->
                <li>
                    <a href="#layouts">
                        <i class="iconsminds-pantone"></i> 个人中心
                    </a>
                </li>
                <!--功能模块七-->
                <li>
                    <a href="Coming.Soon.html">
                        <i class="iconsminds-library"></i> 关于我们
                    </a>
                </li>
            </ul>
        </div>
    </div>
    
    <!--左侧二级目录-->
    <div class="sub-menu">
        <div class="scroll">
            <ul class="list-unstyled" data-link="dashboard">
                <li>
                    <a href="index.html">
                        <i class="simple-icon-screen-desktop"></i> <span class="d-inline-block">初始界面</span>
                    </a>
                </li>
                <li>
                    <a href="Add.File.html">
                        <i class="simple-icon-cloud-upload"></i> <span class="d-inline-block">知识图谱上传</span>
                    </a>
                </li>
                <li>
                    <a href="Kg.List.html">
                        <i class="simple-icon-list"></i> <span class="d-inline-block">知识图谱列表</span>
                    </a>
                </li>
                <li class="active">
                    <a href="Kg.Graph.html">
                        <i class="simple-icon-social-instagram"></i> <span class="d-inline-block">知识图谱展示</span>
                    </a>
                </li>
            </ul>
            
            
            <ul class="list-unstyled" data-link="ui">
                <li>
                    <a href="Word.Frequency.Upload.html">
                        <i class="simple-icon-book-open"></i> <span class="d-inline-block">上传词频统计文本</span>
                    </a>
                </li>
                <li>
                    <a href="Word.Frequency.Download.html">
                        <i class="simple-icon-layers"></i> <span class="d-inline-block">生成分词/统计结果</span>
                    </a>
                </li>
            </ul>
            
            <ul class="list-unstyled" data-link="applications">
                <li>
                    <a href="NamedEntity.Recognition.Upload.html">
                        <i class="simple-icon-book-open"></i> <span class="d-inline-block">上传实体识别文本</span>
                    </a>
                </li>
                <li>
                    <a href="NamedEntity.Recognition.Download.html">
                        <i class="simple-icon-feed"></i> <span class="d-inline-block">生成实体数据</span>
                    </a>
                </li>
            </ul>
            
        

            <ul class="list-unstyled" data-link="menu" id="menuTypes">
                <li>
                    <a href="EntityRelation.Extraction.Upload.html">
                        <i class="simple-icon-book-open"></i> <span class="d-inline-block">上传关系抽取文本</span>
                    </a>
                </li>
                <li>
                    <a href="EntityRelation.Extraction.Download.html">
                        <i class="simple-icon-shuffle"></i> <span class="d-inline-block">生成关系三元组数据</span>
                    </a>
                </li>
            </ul>

            <ul class="list-unstyled" data-link="layouts" id="layouts">
                <li>
                    <a href="#" data-toggle="collapse" data-target="#collapseAuthorization" aria-expanded="true"
                        aria-controls="collapseAuthorization" class="rotate-arrow-icon opacity-50">
                        <i class="simple-icon-arrow-down"></i> <span class="d-inline-block">权限管理</span>
                    </a>
                    <div id="collapseAuthorization" class="collapse show">
                        <ul class="list-unstyled inner-level-menu">
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-user-following"></i> <span
                                        class="d-inline-block">登录</span>
                                </a>
                            </li>
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-user-follow"></i> <span
                                        class="d-inline-block">注册</span>
                                </a>
                            </li>
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-user-unfollow"></i> <span class="d-inline-block">找回密码</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="#" data-toggle="collapse" data-target="#collapseProduct" aria-expanded="true"
                        aria-controls="collapseProduct" class="rotate-arrow-icon opacity-50">
                        <i class="simple-icon-arrow-down"></i> <span class="d-inline-block">账号信息</span>
                    </a>
                    <div id="collapseProduct" class="collapse show">
                        <ul class="list-unstyled inner-level-menu">
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-credit-card"></i> <span class="d-inline-block">个人资料</span>
                                </a>
                            </li>
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-list"></i> <span class="d-inline-block">操作记录</span>
                                </a>
                            </li>
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-grid"></i> <span class="d-inline-block">其他</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
                <li>
                    <a href="#" data-toggle="collapse" data-target="#collapseProfile" aria-expanded="true"
                        aria-controls="collapseProfile" class="rotate-arrow-icon opacity-50">
                        <i class="simple-icon-arrow-down"></i> <span class="d-inline-block">分享与导出</span>
                    </a>
                    <div id="collapseProfile" class="collapse show">
                        <ul class="list-unstyled inner-level-menu">
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-share"></i> <span class="d-inline-block">分享链接</span>
                                </a>
                            </li>
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-link"></i> <span class="d-inline-block">导出文件</span>
                                </a>
                            </li>
                            <li>
                                <a href="Coming.Soon.html">
                                    <i class="simple-icon-grid"></i> <span class="d-inline-block">其他</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </li>
            </ul>
            

        </div>
    </div>
</div>
    <main>
        <div class="container-fluid">
            <div class="row  ">
                <div class="col-12">
                    <h1>KG 展示</h1>
                    <nav class="breadcrumb-container d-none d-sm-block d-lg-inline-block" aria-label="breadcrumb">
                        <ol class="breadcrumb pt-0">
                            <li class="breadcrumb-item">
                                <a id="a1" href="javascript:void(0)">展示一跳以内</a>
                            </li>
                            <li class="breadcrumb-item">
                                <a id="a2" href="javascript:void(0)">展示两跳以内</a>
                            </li>
                            
                        </ol>
                    </nav>
                    <div class="text-zero top-right-button-container">
                        <a onclick="window.print();" class="btn btn-primary" href="#">导出pdf或打印</a>
                        <!--print()后有return false;但会显示语法错误-->> 
                    </div>
                    
                    <div class="separator mb-5"></div>
                </div>
            </div>

            <div class="row">
                <div class="col-12 mb-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">KG信息</h5>
                            <div  id="mountNode" class="">
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="page-footer">
        <div class="footer-content">
            <div class="container-fluid">
                <div class="row">
                    <div class="col-12 col-sm-6">
                        <p class="mb-0 text-muted">云南大学信息学院@ <a href="http://www.isc.ynu.edu.cn/home/
"  class="btn-link">YNU·DKE</a></p>
						
                    </div>
                    <div class="col-sm-6 d-none d-sm-block">
                        <ul class="breadcrumb pt-0 pr-0 float-right">
                            <li class="breadcrumb-item mb-0">
                                <a href="#" class="btn-link">feef15feef</a>
                            </li>
                            <li class="breadcrumb-item mb-0">
                                <a href="#" class="btn-link">JOJOnathan@163.com</a>
                            </li>
                            <li class="breadcrumb-item mb-0">
                                <a href="#" class="btn-link">18213901251</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <script src="js/vendor/jquery-3.3.1.min.js"></script>
    <script src="js/vendor/bootstrap.bundle.min.js"></script>
    <script src="js/vendor/perfect-scrollbar.min.js"></script>
    <script src="js/dore.script.js"></script>
    <script src="js/scripts.js"></script>
    <script src="js/g6/g6.min.js"></script>

    <script>
       

    </script>

    
    <script>
        //G6图展示引擎方法

        // 实例化 Minimap 插件
        const minimap = new G6.Minimap({
        size: [ 100, 100 ],
        className: "minimap",
        type: 'delegate'
        });
      
        // 实例化 Grid 插件
        const grid = new G6.Grid();
      
        const graph = new G6.Graph({
            container: 'mountNode',  //图的dom容器
            width: 1600,   //画布的宽度和高度
            height: 1200,
            defaultNode: {  //节点的默认样式
                type: 'ellipse',  //设置节点类型为椭圆形
                size: [ 60, 25 ],  //设置节点宽为60，高为25
                labelCfg: {
                  style: {
                    // 节点填充色
                    fill: '#EDF5FF',
                    lineWidth: 2, //节点边框的大小
                    stroke:'#1890ff', //边框的颜色
                    shadowColor: '#1890ff', //阴影的颜色
                    shadowBlur: 20,  //阴影的范围
                    shadowOffsetX: 0,//阴影的位置
                    shadowOffsetY: 0,
                    cursor:  'move',//鼠标移动到节点上的样式
      
                    //对节点的文字添加样式
                    labelCfg:{
                        style:{
                            fontSize: 14,  //文字的大小
                            fill: '#1890ff', //文字填充色
                            cursor: 'move', //鼠标移动到文字上的样式
                        },
                    }
                  },
                },
            },
            //边的默认样式
            defaultEdge: {
                type: 'quadratic',
                labelCfg: {
                  autoRotate: true,
                },
                style: {
                  endArrow: true,
                  startArrow: false,
            }
            },
            nodeStateStyles: {
                hover: {
                    fill: 'lightsteelblue'
                },
                click: {
                    stroke: '#000',
                    lineWidth: 3
                }
            },
            edgeStateStyles: {
                click: {
                    stroke: 'steelblue'
                }
            },
            //同心圆布局
            // layout: {
            //     type: 'concentric',
            //     center: [ 900, 400 ],     // 可选，
            //     linkDistance: 100,         // 可选，边长
            //     preventOverlap: true,     // 可选，必须配合 nodeSize
            //     nodeSize: 30,             // 可选
            //     sweep: 10,                // 可选
            //      focusNode: '',  
            //     equidistant: false,       // 可选
            //     startAngle: 0,            // 可选
            //     clockwise: false,         // 可选
            //     maxLevelDiff: 10,         // 可选
            //     sortBy: 'degree',          // 可选
            //     workerEnabled: true,       // 可选，开启 web-worker
            // }
            layout: {
                type: 'radial',
                center: [700,400],     // 可选，默认为图的中心
                linkDistance: 200,        // 可选，边长
                maxIteration: 3000,       // 可选
                focusNode: '',      // 可选,辐射的中心点，默认为数据的第一个节点
                unitRadius: 200,          // 可选，每一圈距离上一圈的距离
                preventOverlap: true,     // 可选，是否防止重叠，必须配合 nodeSize
                nodeSize: 40,             // 可选，节点大小(直径)，用于防止节点重叠时的碰撞检测
                strictRadial: true,     // 可选，是否必须是严格的radial布局
                workerEnabled: true,       // 可选，开启 web-worker
                sortStrength: 10,      //同层节点根据 sortBy 排列的强度，数值越大，sortBy 指定的方式计算出距离越小的越靠近。
            },
            modes: {
                default: [ 'drag-node', 'drag-canvas', 'zoom-canvas', // 拖拽节点，拖拽画布，缩放画布
                        // 点提示框交互工具的配置
                        {
                        type: 'tooltip',
                        formatText(model) {
                            const text = '名称: ' + model.label
                            + '<br/> 类别: ' + model.class;
                            return text;
                        },
                        shouldUpdate: e => {
                            return true;
                        }
                        },
                        // 边提示框交互工具的配置
                        {
                        type: 'edge-tooltip',
                        formatText(model) {
                            const text = '<br/> 名称: ' + model.label
                            + '<br/> 头实体: ' + model.source
                            + '<br/> 尾实体: ' + model.target
                            + '<br/> 宽度: ' + model.weight
                            return text;
                        },
                        shouldUpdate: e => {
                            return true;
                        }
                        }
                 ]
            },
            nodeStateStyles:{
                hover:{  //鼠标hover到节点，hover状态为启用
                    fill: 'lightsteelblue',
                },
                click:{  //鼠标点击节点，click状态为启用
                    stroke: 'steelblack',
                    lineWidth: 3,
                },
            },
            plugins: [ minimap, grid ],    // 将 Minimap 和 Grid 插件的实例配置到图上
            fitCenter: true,   // 开启后，图将会被平移，图的中心将对齐到画布中心但不缩放，优先级低于fitView
            fitView: true,  //开启画布自适应，开启后图自动适配画布大小
            linkCenter: false,  //边是否连入节点的中心
            groupByTypes: false,  //各种元素是否在一个分组内，决定节点和边的层级问题，默认情况下所有的节点在一个分组中，所有的边在一个分组中，当这个参数为 false 时，节点和边的层级根据生成的顺序确定。当使用 Combo 时，必须将其设置为 false 。
            autoPaint: false,  //当图中元素更新，或视口变换时，是否自动重绘。建议在批量操作节点时关闭，以提高性能，完成批量操作后再打开，参见后面的 setAutoPaint() 方法。
        });
        //$.getJSON('./.json', data => {
        
        //从Kg.List.html点击进入链接获取要展示的Kg的id和json数据
        var JsonItem=localStorage.getItem("SearchRule"); 
        var GraphId=localStorage.getItem("Id");
        var hostname = window.location.hostname;
        if(JsonItem!=null){
            //将JSON数据反序列化为对象
            var keyItem=JSON.parse(JsonItem);      
            if(keyItem!=null ){
                const main = async () => {
            // const response = await fetch(keyItem);  
            // const data = await response.json();

            //读取kg json数据、id和中心节点
            data = keyItem;
            graphId = GraphId;
            centerNodeId = data.center_node_id;

            // console.log(data);  调试用
            // console.log(graphId);
            const nodes = data.nodes;  //声明节点和边
            const edges = data.edges;
            //中心节点
            const focusNode = data.center_node_id;  //声明渲染所用中心节点
            // console.log(focusNode); 调试用
            
            //展示一跳之内的ajax方法
            $("#a1").click(function(){
                $.ajax({
                    type:'GET',  //提交方法是GET
                    url:'http://'+hostname+':65000/showGraphById/'+ graphId +'/'+'1'+'/'+ focusNode, 
                    data:{}, //暂不传JSON数据
                    dataType:'json', //后台返回的数据类型是json
                    async : true,
                    timeout:60000,  //请求超时时间60000毫秒
                    error:function(data){  //请求失败的回调
                        window.location.href='#';
                    },
                    success:function(result){   //请求成功的回调
                        // var str = JSON.stringify(result);
                        // console.log(str);
                        var keyItem=JSON.stringify(result);      //将对象"序列化"为JSON数据(字符串格式)
                        localStorage.setItem("SearchRule",keyItem);  //以字符串格式存储信息
                        window.location.href ="Kg.Graph.html";  //刷新kg展示页面
                        window.event.returnValue=false;
                        }
                });

            });

            //展示两跳之内的ajax方法
            $("#a2").click(function(){
                $.ajax({
                    type:'GET',  //提交方法是GET
                    url:'http://'+hostname+':65000/showGraphById/'+ graphId +'/'+'2'+'/'+ focusNode, 
                    data:{}, //暂不传JSON数据
                    dataType:'json', //后台返回的数据类型是json
                    async : true,
                    timeout:60000,  //请求超时时间60000毫秒
                    error:function(data){  //请求失败的回调
                        window.location.href='#';
                    },
                    success:function(result){   //请求成功的回调
                        // var str = JSON.stringify(result);
                        // console.log(str);
                        var keyItem=JSON.stringify(result);      //将对象"序列化"为JSON数据(字符串格式)
                        localStorage.setItem("SearchRule",keyItem);  //以字符串格式存储信息
                        window.location.href ="Kg.Graph.html";  //刷新kg展示页
                        window.event.returnValue=false;
                        }
                });

            });

            //中心节点样式
            focusNode.style = {
            stroke: '#00419F',
            fill: '#729FFC',
            lineWidth: 2,
            };
            
            //若节点没有样式则赋样式
            nodes.forEach(node => {
            if (!node.style) {
                node.style = {};
            }
            node.style.lineWidth = 1;
            node.style.stroke = '#666';
            node.style.fill = 'steelblue';
            switch (node.class) {
                case 'c0': {
                node.type = 'circle';
                node.size = 30;
                break;
                }
                case 'c1': {
                node.type = 'rect';
                node.size = [ 35, 20 ];
                break;
                }
                case 'c2': {
                node.type = 'ellipse';
                node.size = [ 35, 20 ];
                break;
                }
            }
            });
            
            //若节点没有样式则赋样式
            edges.forEach(edge => {
            if (!edge.style) {
                edge.style = {};
            }
            edge.style.lineWidth = edge.weight;
            edge.style.opacity = 0.6;
            edge.style.stroke = 'grey';
            });
            
            
            //关键：渲染数据渲染画布
            graph.data(data);
            graph.render();
        
            // 拖动节点时重新布局
            // graph.on('node:dragstart', (e) => {
            //   graph.layout();
            //   refreshDragedNodePosition(e);
            // });
            
            //允许拖动但自动返回原位操作
            // setInterval(() => {
            //     data.nodes.forEach((node) => {
            //         node.x += Math.random() * 50 - 25;
            //         node.y += Math.random() * 50 - 25;
            // });
            // graph.changeData(data);
            // }, 600);
            // if (typeof window !== 'undefined')
            // window.onresize = () => {
            // if (!graph || graph.get('destroyed')) return;
            // if (!container || !container.scrollWidth || !container.scrollHeight) return;
            // graph.changeSize(container.scrollWidth, container.scrollHeight);
            // };
            
            //G6基础交互事件
            graph.on('node:mouseenter', e => {
            const nodeItem = e.item;
            graph.setItemState(nodeItem, 'hover', true);
            });
            graph.on('node:mouseleave', e => {
            const nodeItem = e.item;
            graph.setItemState(nodeItem, 'hover', false);
            });
            graph.on('node:click', e => {
            const clickNodes = graph.findAllByState('node', 'click');
            clickNodes.forEach(cn => {
                graph.setItemState(cn, 'click', false);
            });
            const nodeItem = e.item;
            graph.setItemState(nodeItem, 'click', true);
            });

            var hostname = window.location.hostname;
            //双击节点时跳转被选中节点的二维度图
            graph.on('node:dblclick', e => {
                const dblclickNode = graph.findAllByState('node', 'dblclick');
                dblclickNode.forEach(cn =>{
                    graph.setItemState(cn, 'dblclick', false);
                });
                const dblNodeItem = e.item;
                dblNodeCfg = dblNodeItem._cfg;
                dblNodeCfgId = dblNodeCfg.id;
                console.log(dblNodeCfgId);
                $.ajax({
                type:'GET',  //提交方法是GET
                url:'http://'+hostname+':65000/showGraphById/'+ graphId  +'/'+'1' +'/'+dblNodeCfgId, 
                data:{}, //暂不传JSON数据
                dataType:'json', //后台返回的数据类型是json
                async : true,
                timeout:60000,  //请求超时时间60000毫秒
                error:function(data){  //请求失败的回调
                    window.location.href='#';
                },
                success:function(result){   //请求成功的回调
                    // var str = JSON.stringify(result);
                    // console.log(str);
                    var keyItem=JSON.stringify(result);      //将对象"序列化"为JSON数据(字符串格式)
                    localStorage.setItem("SearchRule",keyItem);  //以字符串格式存储信息
                    window.location.href ="Kg.Graph.html";  //刷新kg展示页面
                    window.event.returnValue=false;
                    }
            });

            })
            
            //自定义双击节点跳转页面显示行为类型（跟上一个方法应该效果相同）
            // G6.registerBehavior('ShowNewGraphByDblclick',{
            //     //绑定事件及其回调函数
            //     getEvents(){
            //         return {
            //             'node:dblclick': 'onDblclick',
            //         };
            //     },

            //     ondblclick(evt){
            //         const dblclickNode = evt.item;
            //         dblNodeCfg = dblclickNode._cfg;
            //         dblNodeFfgId = dblNodeCfg.id;
            //         console.log(dblNodeCfgId);
            //         $.ajax({
            //         type:'GET',  //提交方法是Get
            //         url:'http://8.130.177.37:65000/showGraphById/'+ graphId + dblNodeCfgId +'/'+'2', 
            //         data:{}, //暂不传JSON数据
            //         dataType:'json', //后台返回的数据类型是json
            //         async : true,
            //         timeout:1000,  //请求超时时间，毫秒
            //         error:function(data){  //请求失败的回调方法
            //             window.location.href='#';
            //         },
            //         success:function(result){   //请求成功的回调方法
            //             // var str = JSON.stringify(result);
            //             // console.log(str);
            //             var keyItem=JSON.stringify(result);      //将对象"序列化"为JSON数据(字符串格式)
            //             localStorage.setItem("SearchRule",keyItem);  //以字符串格式存储信息
            //             window.location.href ="Kg.Graph.html";
            //             window.event.returnValue=false;
            //             }
            //             // window.location.href="KG.Graph.html?json="+str;       //如果没有参数，只写路径就好

            //     });
            //     },
            // });



            graph.on('edge:click', e => {
            const clickEdges = graph.findAllByState('edge', 'click');
            clickEdges.forEach(ce => {
                graph.setItemState(ce, 'click', false);
            });
            const edgeItem = e.item;
            graph.setItemState(edgeItem, 'click', true);
            });
        
            //将画布上的元素导出为图片
            // graph.downloadFullImage('tree-graph', {
            //   backgroundColor: '#ddd',
            //   padding: [30, 15, 15, 15],
            // });
        
            //将画布上元素生成为图片的 URL。
            //const dataURL = graph.toDataURL();
            }
            main();
            }
        };

    </script>

    
</body>

</html>